<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ArgumentParser.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GroupA</a> &gt; <a href="index.source.html" class="el_package">edu.jsu.mcis</a> &gt; <span class="el_source">ArgumentParser.java</span></div><h1>ArgumentParser.java</h1><pre class="source lang-java linenums">package edu.jsu.mcis;

import java.util.*;

/**
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 */

public class ArgumentParser
{
    public List &lt;CommandLineArgument&gt; argumentList;
    private String unmatched;
    private String help;
    private String program;
    private String programDescription;
    private String incorrectType;
    private int countOptionalArguments;
    private String output;
	private List &lt;CommandLineArgument&gt; requiredOptionals;
<span class="fc" id="L32">	private List &lt;String&gt; groupOne = new ArrayList&lt;String&gt;();</span>
<span class="fc" id="L33">	private List &lt;String&gt; groupTwo = new ArrayList&lt;String&gt;();</span>
	private boolean firstPass;
	private boolean mutualCheck;
    
/**
 *Class constructor. Establishes an empty argumentList and an
 *empty list of required arguments.
 *&lt;p&gt;
 *Optional argument &quot;help&quot; is available by default.
 */
    public ArgumentParser()
<span class="fc" id="L44">    {</span>
<span class="fc" id="L45">        argumentList = new ArrayList&lt;CommandLineArgument&gt;();</span>
<span class="fc" id="L46">        requiredOptionals = new ArrayList&lt;CommandLineArgument&gt;();</span>
<span class="fc" id="L47">        unmatched =&quot;&quot;;</span>
<span class="fc" id="L48">        incorrectType= &quot;&quot;;</span>
<span class="fc" id="L49">		addOptionalArgument(&quot;help&quot;, CommandLineArgument.DataType.Boolean);</span>
<span class="fc" id="L50">		setShortOption(&quot;help&quot;, &quot;h&quot;);</span>
<span class="fc" id="L51">	}</span>

/**
 *Returns a number representing the number of positional arguments
 *and optional arguments within the argumentList.
 *
 *@return the size of the argument list as an integer value
 */
    public int getSize()
    {
<span class="fc" id="L61">        return argumentList.size();</span>
    }
/**
 *
 *
 *
 *@param num the number of the mutual group the argument is to be placed in
 *@param args the value(s) to be put into the mutual group
 *@throws InvalidGroupException - if an invalid group number is entered
 */
	public void setMutualGroup(int num, String ... args) throws InvalidGroupException
	{
<span class="fc" id="L73">		String message = &quot;Invalid group number: &quot; + num;</span>
<span class="fc" id="L74">		mutualCheck = true;</span>
<span class="fc bfc" id="L75" title="All 2 branches covered.">		if (num == 1)</span>
		{
<span class="fc bfc" id="L77" title="All 2 branches covered.">			for (String arg : args)</span>
			{
<span class="fc" id="L79">				groupOne.add(arg);</span>
			}
		}
		
<span class="fc bfc" id="L83" title="All 2 branches covered.">		else if (num == 2)</span>
		{
<span class="fc bfc" id="L85" title="All 2 branches covered.">			for (String arg : args)</span>
			{
<span class="fc" id="L87">				groupTwo.add(arg);</span>
			}
		}
		
<span class="fc" id="L91">		else throw new InvalidGroupException(message);</span>
<span class="fc" id="L92">	}</span>
	
/**
 *Returns the values contained in the specified mutually exclusive group.
 *
 *@param num the number of the mutual group
 *@throws InvalidGroupException - if an invalid group number is entered
 *@return the members of the mutual group as a string value
 */	
	public String getMutualGroup(int num) throws InvalidGroupException
	{
<span class="fc" id="L103">		String message = &quot;Invalid group number: &quot; + num;</span>
<span class="fc bfc" id="L104" title="All 2 branches covered.">		if (num == 1)</span>
<span class="fc" id="L105">			return groupOne.toString();</span>
<span class="pc bpc" id="L106" title="1 of 2 branches missed.">		else if(num == 2)</span>
<span class="nc" id="L107">			return groupTwo.toString();</span>
<span class="fc" id="L108">		else throw new InvalidGroupException(message);</span>
	}
	
/**
 *Sets the argument to only accept a set of restricted values. Multiple values can be
 *added(separated by a comma). 
 *
 *@param title the name of the argument
 *@param args the value(s) the argument is restricted to
 *@throws IncorrectTypeException - if an incorrect data type is entered for the argument
 */	
	public void addRestricted(String title, Object ... args) throws IncorrectTypeException
	{
<span class="fc" id="L121">		int k =0;</span>
<span class="fc" id="L122">		incorrectType = program + &quot;.java: error: argument &quot;;</span>
<span class="fc bfc" id="L123" title="All 2 branches covered.">		for(Object arg : args)</span>
		{
<span class="fc bfc" id="L125" title="All 2 branches covered.">			if(argumentList.contains(new Argument(title)))</span>
			{
				try {
<span class="fc" id="L128">					Argument tmpArg = new Argument(title);</span>
<span class="fc" id="L129">					argumentList.get(argumentList.indexOf(tmpArg)).addRestricted(arg);</span>
<span class="fc" id="L130">					k = argumentList.indexOf(tmpArg);</span>
<span class="fc" id="L131">				} catch (Exception e) {</span>
<span class="fc" id="L132">					incorrectType += title +&quot; invalid &quot;+argumentList.get(k).getDataType().toString().toLowerCase() +</span>
								&quot; value: &quot; + arg.toString();
<span class="fc" id="L134">					throw new IncorrectTypeException(incorrectType);</span>
					
<span class="fc" id="L136">				}</span>
			}
			else {
				try {
<span class="fc" id="L140">					OptionalArgument tmpArg = new OptionalArgument(title);</span>
<span class="fc" id="L141">					argumentList.get(argumentList.indexOf(tmpArg)).addRestricted(arg);</span>
<span class="fc" id="L142">					k = argumentList.indexOf(tmpArg);</span>
<span class="nc" id="L143">				} catch (Exception e) {</span>
<span class="nc" id="L144">				incorrectType += title +&quot; invalid &quot;+argumentList.get(k).getDataType().toString().toLowerCase() +</span>
												&quot; value: &quot; + arg.toString();
<span class="nc" id="L146">				throw new IncorrectTypeException(incorrectType);</span>

<span class="fc" id="L148">				}</span>
			}
		}
<span class="fc" id="L151">	}</span>
	
/**
 *Returns a list of the values an argument is restricted to.
 *
 *@param title the title of the argument
 *@return the values the argument is restricted to
 */	
	public String checkRestricted(String title)
	{
<span class="fc bfc" id="L161" title="All 2 branches covered.">		if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L162">			return argumentList.get(argumentList.indexOf(new Argument(title))).getRestricted();</span>
		else
<span class="fc" id="L164">			return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getRestricted();</span>
	}
    
/**
 *Adds the program name and the program's description.
 *
 *@param name the name of the program
 *@param description the description of the program
 */
    public void addProgram(String name, String description)
    {
<span class="fc" id="L175">        program = name;</span>
<span class="fc" id="L176">        programDescription = description;</span>
<span class="fc" id="L177">    }</span>
    
/**
 *Adds a new argument to the list of arguments.
 *
 *@param str the name of the argument
 */
    public void addArgument(String str)
    {
<span class="fc" id="L186">        argumentList.add(new Argument(str));</span>
<span class="fc" id="L187">    }</span>
    
/**
 *Adds a new argument to the list of arguments and sets the data type
 *that argument can hold.
 *
 *@param title the name of the argument
 *@param type the data type of the argument
 */
    public void addArgument(String title, CommandLineArgument.DataType type)
    {
<span class="fc" id="L198">		Argument arg = new Argument(title);</span>
<span class="fc" id="L199">		arg.setDataType(type);</span>
<span class="fc" id="L200">		argumentList.add(arg);</span>
<span class="fc" id="L201">    }</span>
    
/**
 *Sets a short name to an optional argument which allows the
 *optional argument to be called by either it's full name or
 *the declared short name.
 *
 *@param title the name of the argument
 *@param str the short name to be attached to the argument
 */
    public void setShortOption(String title, String str)
    {
<span class="fc" id="L213">        argumentList.get(argumentList.indexOf(new OptionalArgument(title))).setShort(str);</span>
<span class="fc" id="L214">    }</span>
    
/**
 *Returns the short name if one has been assigned to the argument. This
 *is used for generating the help text.
 *
 *@param title the name of the argument
 *@return the short option associated with the argument
 */
    public String getShortOption(String title)
    {
<span class="fc" id="L225">        return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getShort();</span>
    }
    
/**
 *Adds a new optional argument to the argument list with a 
 *specified data type.
 *&lt;p&gt;
 *Accepted Data Types: Boolean, Float, String, Integer 
 *
 *@param title the title of the optional argument
 *@param type the data type of the optional argument
 */
    public void addOptionalArgument(String title, CommandLineArgument.DataType type)
    {
<span class="fc" id="L239">		OptionalArgument arg = new OptionalArgument(title);</span>
<span class="fc" id="L240">		arg.setDataType(type);</span>
<span class="fc" id="L241">        argumentList.add(arg);</span>
<span class="fc" id="L242">        countOptionalArguments++;</span>
<span class="fc" id="L243">    }</span>
    
/**
 *Adds a new optional argument to the argument list. 
 *
 *
 *@param title name of the optional argument
 */
    public void addOptionalArgument(String title)
    {
<span class="fc" id="L253">        argumentList.add(new OptionalArgument(title));</span>
<span class="fc" id="L254">        countOptionalArguments++;</span>
<span class="fc" id="L255">    }	</span>
	
/**
 *Sets a default value to an argument that will be used if no
 *other value is assigned to the argument.
 *
 *@param title the name of the argument
 *@param value the desired default value of the argument
 */
	public void setDefaultValue(String title, String value)
	{
<span class="fc" id="L266">		setValue(title, value);</span>
<span class="fc" id="L267">	}</span>
	
/**
 *Sets the value(s) of the argument.
 *
 *@param args the value(s) of the referenced optional argument or the next positional argument; the first value to be passed in the title of the argument
 *@throws IncorrectTypeException if the data type does not match the data type of the argument
 *@throws IncorrectValueException if the value does not match the restricted values
 */
	public void setValue(String ... args) throws IncorrectTypeException, IncorrectValueException
	{
<span class="fc" id="L278">		int k=0;</span>
<span class="fc" id="L279">		incorrectType = program + &quot;.java: error: argument &quot;;</span>
		try{
<span class="fc bfc" id="L281" title="All 2 branches covered.">			if(argumentList.contains(new OptionalArgument(args[0])))</span>
			{
<span class="fc" id="L283">				k = argumentList.indexOf(new OptionalArgument(args[0]));</span>
<span class="fc bfc" id="L284" title="All 2 branches covered.">				if(args.length == 1)</span>
				{
<span class="fc" id="L286">					argumentList.get(k).setValue(true);</span>
				}
<span class="pc bpc" id="L288" title="1 of 2 branches missed.">				else if (args.length == 2)</span>
				{
<span class="fc" id="L290">					argumentList.get(k).setValue(args[1]);</span>
				}
			}
			else
<span class="pc bpc" id="L294" title="1 of 2 branches missed.">				for (k = 0; k &lt; argumentList.size(); k++)</span>
				{
<span class="fc bfc" id="L296" title="All 2 branches covered.">					if (argumentList.get(k) instanceof Argument)</span>
					{
<span class="fc bfc" id="L298" title="All 4 branches covered.">						if (argumentList.get(k).getValue() == null || argumentList.get(k).getNumberValues() &gt; argumentList.get(k).getMultiplesCount())</span>
						{
<span class="fc" id="L300">							argumentList.get(k).setValue(args[0]);</span>
<span class="fc" id="L301">							return;</span>
						}
					}
				}
<span class="fc" id="L305">		}catch(NumberFormatException | IncorrectValueException e){</span>
			
<span class="fc" id="L307">			incorrectType += argumentList.get(k).getTitle() +</span>
            &quot; invalid &quot;+argumentList.get(k).getDataType().toString().toLowerCase() +
			&quot; value: &quot;;
<span class="fc bfc" id="L310" title="All 2 branches covered.">			if (args.length ==2)</span>
<span class="fc" id="L311">				incorrectType+= args[1];</span>
			else
<span class="fc" id="L313">				incorrectType += args[0];</span>
				
<span class="fc bfc" id="L315" title="All 2 branches covered.">			if( e instanceof NumberFormatException)</span>
<span class="fc" id="L316">				throw new IncorrectTypeException(incorrectType);</span>
			else
<span class="fc" id="L318">				throw new IncorrectValueException(incorrectType);</span>
<span class="fc" id="L319">		 }</span>
		 
<span class="fc" id="L321">	}</span>
    
/**
 *Sets the description of each argument for use in the help text.
 *
 *@param title the name of the argument
 *@param description the description of the argument
 */
    public void setDescription(String title, String description)
    {
<span class="fc bfc" id="L331" title="All 2 branches covered.">        if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L332">            argumentList.get(argumentList.indexOf(new Argument(title))).setDescription(description);</span>
<span class="pc bpc" id="L333" title="1 of 2 branches missed.">        else if(argumentList.contains(new OptionalArgument(title)))</span>
<span class="fc" id="L334">            argumentList.get(argumentList.indexOf(new OptionalArgument(title))).setDescription(description);</span>
<span class="fc" id="L335">    }</span>
    
/**
 *Returns the description associated with the argument
 *if that argument has one.
 *
 *@param title the name of the argument
 *@return the set description of the argument
 */
    public String getDescription(String title)
    {
<span class="fc bfc" id="L346" title="All 2 branches covered.">        if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L347">            return argumentList.get(argumentList.indexOf(new Argument(title))).getDescription();</span>
        else
<span class="fc" id="L349">            return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getDescription();</span>
    }
    
/**
 *Returns the value of an argument.
 *
 *@param title the name of the argument
 *@param &lt;T&gt; the type of the argument being referenced
 *@return the value held by argument
 */
    public &lt;T&gt; T getValue(String title)
    {
<span class="fc bfc" id="L361" title="All 2 branches covered.">        if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L362">            return (T)argumentList.get(argumentList.indexOf(new Argument(title))).getValue();</span>
        else
<span class="fc" id="L364">            return (T)argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getValue();</span>
    }
    
/**
 *Returns the data type of the specified argument.
 *
 *@param title the name of the argument
 *@return the data type associated with the argument
 */
    public CommandLineArgument.DataType getArgumentDataType(String title)
    {
<span class="fc bfc" id="L375" title="All 2 branches covered.">        if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L376">            return argumentList.get(argumentList.indexOf(new Argument(title))).getDataType();</span>
        else
<span class="fc" id="L378">            return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getDataType();</span>
    }
    
/**
 *Returns the requested optional argument.
 *
 *@param title the name of the optional argument
 *@return the corresponding optional argument 
 */
    public String getOptionalArgument(String title)
    {
<span class="fc" id="L389">        return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getTitle();</span>
    }
    
/**
 *Sets the number of values each argument has.
 *
 *@param title the name of the argument
 *@param number the number of values the argument holds
 */
    public void setNumberValues(String title, int number)
    {
<span class="fc bfc" id="L400" title="All 2 branches covered.">		if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L401">            argumentList.get(argumentList.indexOf(new Argument(title))).setNumberValues(number);</span>
        else
<span class="fc" id="L403">            argumentList.get(argumentList.indexOf(new OptionalArgument(title))).setNumberValues(number);</span>
<span class="fc" id="L404">    }</span>
    
/**
 *Returns the number of values the argument has.
 *
 *@param title the name of the argument
 *@return the number of values associated with an argument
 */
    public int getNumberValues(String title)
    {
<span class="fc bfc" id="L414" title="All 2 branches covered.">		if(argumentList.contains(new Argument(title)))</span>
<span class="fc" id="L415">            return argumentList.get(argumentList.indexOf(new Argument(title))).getNumberValues();</span>
        else
<span class="fc" id="L417">            return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getNumberValues();</span>
    }

/**
 *Sets the optional argument to be required.
 *
 *@param title the name of the argument
 */
	public void setRequired(String title)
	{
<span class="fc" id="L427">		OptionalArgument arg = new OptionalArgument(title);</span>
<span class="fc" id="L428">		argumentList.get(argumentList.indexOf(arg)).setRequired();</span>
<span class="fc" id="L429">		requiredOptionals.add(arg);</span>
<span class="fc" id="L430">	}</span>
	
/**
 *Returns whether or not the optional argument is required.
 *
 *@param title the name of the argument
 *@return if the argument is required of not required
 */
	public boolean getRequired(String title)
	{
<span class="fc" id="L440">		return argumentList.get(argumentList.indexOf(new OptionalArgument(title))).getRequired();</span>
	}

/**
 *Returns a string of the required arguments that were not assigned a value.
 *
 *
 *@return the required arguments that did not receive a value
 */
    public String getUnmatched()
    {
<span class="fc" id="L451">        return unmatched;</span>
    }

/**
 *Returns the name of the program.
 *
 *@return the name of the program
 */
    public String getProgramName()
    {
<span class="fc" id="L461">        return program;</span>
    }
	
/**
 *Returns the program's description.
 *
 *@return the description of the program
 */
    public String getProgramDescription()
    {
<span class="fc" id="L471">        return programDescription;</span>
    }
	
/**
 *Returns a list of all arguments created.
 *
 *
 *@return the list of all arguments
 */
    public List getArgumentList()
    {
<span class="fc" id="L482">        return argumentList;</span>
    }
    
/**
 *Parses the string passed in through the Command Line.
 *
 *
 *@param str the string to be parsed
 *@throws NotEnoughArgValuesException if the amount of values parsed does not match the number of required arguments
 *@throws TooManyArgValuesException if the amount of values parsed exceeds the number of required arguments
 *@throws IncorrectTypeException if the data type of a value does not match the data type of the argument
 *@throws IncorrectValueException if the value does not match the restricted values of an argument
 */
    public void parse(String str) throws NotEnoughArgValuesException, TooManyArgValuesException, IncorrectTypeException, IncorrectValueException, InvalidGroupException
    {
<span class="fc" id="L497">        Scanner scan = new Scanner(str);</span>
<span class="fc" id="L498">		String tempLine = &quot;&quot;;</span>
<span class="fc" id="L499">        int countArgValues = 0;</span>
<span class="fc" id="L500">        unmatched = &quot;unrecognised arguments: &quot;;</span>
<span class="fc" id="L501">		int optionalArgumentCount = 0;</span>
<span class="fc" id="L502">        int numberValues = 0;</span>
<span class="fc bfc" id="L503" title="All 2 branches covered.">        while(scan.hasNext())</span>
        {
<span class="fc" id="L505">			String tempOpt = &quot;&quot;;</span>
<span class="fc" id="L506">            String extra  = scan.next();</span>
<span class="fc" id="L507">			tempLine += extra;</span>
			
<span class="pc bpc" id="L509" title="1 of 4 branches missed.">			if (str.contains(&quot;-h&quot;) || str.contains(&quot;--help&quot;))</span>
			{	
<span class="fc" id="L511">				System.out.println(getHelpText());</span>
<span class="fc" id="L512">				return;</span>
			}					
			
<span class="fc bfc" id="L515" title="All 2 branches covered.">            if (extra.startsWith(&quot;-&quot;))</span>
            {
<span class="fc bfc" id="L517" title="All 2 branches covered.">				for(int i =0; i &lt; extra.length(); i++)</span>
				{
<span class="fc bfc" id="L519" title="All 2 branches covered.">					if (extra.charAt(i) != '-') tempOpt += extra.charAt(i);</span>
				}
								
<span class="fc" id="L522">				OptionalArgument tempArg = new OptionalArgument(tempOpt);</span>
<span class="fc bfc" id="L523" title="All 2 branches covered.">				if (argumentList.contains(tempArg))</span>
				{
				
<span class="fc bfc" id="L526" title="All 2 branches covered.">					if (mutualCheck)</span>
					{
<span class="fc" id="L528">						optionalArgumentCount++;</span>
<span class="fc bfc" id="L529" title="All 2 branches covered.">						if(optionalArgumentCount == 1)</span>
<span class="fc" id="L530">							setPass(tempOpt);</span>
					}
<span class="fc" id="L532">					String message = &quot;This Group does not contain &quot;;</span>
<span class="fc bfc" id="L533" title="All 2 branches covered.">					if(argumentList.get(argumentList.indexOf(tempArg)).getNumberValues() == 0)</span>
					{
<span class="fc bfc" id="L535" title="All 6 branches covered.">						if (mutualCheck &amp;&amp; (groupOne.contains(tempOpt) || groupTwo.contains(tempOpt)))</span>
						{
<span class="fc bfc" id="L537" title="All 2 branches covered.">							if(firstPass)</span>
							{
<span class="pc bpc" id="L539" title="1 of 2 branches missed.">								if(groupOne.contains(tempOpt))</span>
<span class="fc" id="L540">									setValue(tempOpt);</span>
								else
<span class="nc" id="L542">									throw new InvalidGroupException(message + tempOpt);</span>
							}
							else
							{
<span class="fc bfc" id="L546" title="All 2 branches covered.">								if(groupTwo.contains(tempOpt))</span>
								
<span class="fc" id="L548">									setValue(tempOpt);</span>
								else
<span class="fc" id="L550">									throw new InvalidGroupException(message + tempOpt);</span>
							}
						}
						else
						{
<span class="fc" id="L555">							setValue(tempOpt);</span>
						}
					}
					else
					{
<span class="fc" id="L560">						numberValues = argumentList.get(argumentList.indexOf(tempArg)).getNumberValues();</span>
<span class="fc bfc" id="L561" title="All 2 branches covered.">						for (int i = 0; i&lt;numberValues; i++)</span>
						{
<span class="fc" id="L563">							String tempScan = scan.next();</span>
<span class="fc bfc" id="L564" title="All 6 branches covered.">							if (mutualCheck &amp;&amp; (groupOne.contains(tempOpt) || groupTwo.contains(tempOpt)))</span>
							{
<span class="fc bfc" id="L566" title="All 2 branches covered.">								if(firstPass)</span>
								{
<span class="pc bpc" id="L568" title="1 of 2 branches missed.">									if(groupOne.contains(tempOpt))</span>
<span class="fc" id="L569">										setValue(tempOpt, tempScan);</span>
									else
<span class="nc" id="L571">										throw new InvalidGroupException(message + tempOpt);</span>
								}
								else
								{
<span class="fc bfc" id="L575" title="All 2 branches covered.">									if(groupTwo.contains(tempOpt))</span>
									
<span class="fc" id="L577">										setValue(tempOpt, tempScan);</span>
									else
<span class="fc" id="L579">										throw new InvalidGroupException(message + tempOpt);</span>
								}
							}
							else
							{
<span class="pc bpc" id="L584" title="1 of 2 branches missed.">								if (tempArg.hasRestricted())</span>
								{
<span class="nc bnc" id="L586" title="All 2 branches missed.">									if(checkRestricted(tempOpt).contains(tempScan)) </span>
<span class="nc" id="L587">										setValue(tempOpt, tempScan);</span>
								}
<span class="fc" id="L589">								else setValue(tempOpt, tempScan);</span>
							}
						}
					}
<span class="fc" id="L593">				}</span>
				else
<span class="fc" id="L595">					throw new IncorrectValueException(tempOpt + &quot; is not a valid argument.&quot;);</span>
<span class="fc" id="L596">            }</span>
            else
            {
<span class="fc bfc" id="L599" title="All 2 branches covered.">                if(countArgValues &lt;argumentList.size() - countOptionalArguments)</span>
                {
<span class="fc" id="L601">					setValue(extra);</span>
<span class="fc bfc" id="L602" title="All 2 branches covered.">					for (int i = 0; i&lt;getNextArgumentNumberValues(); i++)</span>
					{						
<span class="fc" id="L604">						setValue(scan.next());			</span>
					}
                }
                else
                {
<span class="fc" id="L609">                    unmatched += extra + &quot; &quot;;</span>
                }
                
<span class="fc" id="L612">                countArgValues++;</span>
            }
<span class="fc" id="L614">        }</span>
		
<span class="fc bfc" id="L616" title="All 2 branches covered.">		for(int i = 0; i&lt;requiredOptionals.size(); i++)</span>
		{
<span class="fc bfc" id="L618" title="All 2 branches covered.">			if(!tempLine.contains(requiredOptionals.get(i).getTitle()))</span>
			{
<span class="fc" id="L620">				unmatched = &quot;the following arguments are required: &quot;;</span>
<span class="fc bfc" id="L621" title="All 2 branches covered.">				for(int k = 0; k&lt; requiredOptionals.size(); k++)</span>
				{
<span class="pc bpc" id="L623" title="1 of 2 branches missed.">					if( k == requiredOptionals.size() -1)</span>
<span class="fc" id="L624">						unmatched += requiredOptionals.get(k).getTitle();</span>
					else
<span class="nc" id="L626">						unmatched += requiredOptionals.get(k).getTitle() + &quot; &quot;;</span>
				}
<span class="fc" id="L628">	            throw new NotEnoughArgValuesException(unmatched);</span>
			}
		}
        
<span class="pc bpc" id="L632" title="1 of 2 branches missed.">        if (unmatched != &quot;&quot;)</span>
<span class="fc" id="L633">            unmatched = unmatched.substring(0, unmatched.length() -1);</span>
        
<span class="fc bfc" id="L635" title="All 2 branches covered.">        if(argumentList.size() &gt; countArgValues + countOptionalArguments){</span>
<span class="fc" id="L636">            unmatched = &quot;the following arguments are required: &quot;;</span>
          
<span class="fc bfc" id="L638" title="All 2 branches covered.">			for (int k =0; k&lt;argumentList.size(); k++)</span>
			{
<span class="fc bfc" id="L640" title="All 4 branches covered.">				if (argumentList.get(k) instanceof Argument &amp;&amp; argumentList.get(k).getValue() == null)</span>
				{
<span class="fc bfc" id="L642" title="All 2 branches covered.">                if( k == argumentList.size() -1)</span>
<span class="fc" id="L643">                    unmatched += argumentList.get(k).getTitle();</span>
                else
<span class="fc" id="L645">                    unmatched += argumentList.get(k).getTitle() + &quot; &quot;;</span>
				}
			}
<span class="fc" id="L648">            throw new NotEnoughArgValuesException(unmatched);</span>
        }
        
<span class="fc bfc" id="L651" title="All 2 branches covered.">        else if (argumentList.size() - countOptionalArguments &lt; countArgValues)</span>
        {
<span class="fc" id="L653">            throw new TooManyArgValuesException(unmatched);</span>
        }
<span class="fc" id="L655">    }</span>
	
/**
 *Sets which group the first mutually exclusive argument comes from.
 *
 *@param title the name of the argument
 */
	public void setPass(String title)
	{
<span class="fc bfc" id="L664" title="All 2 branches covered.">		if(groupOne.contains(title))</span>
<span class="fc" id="L665">			firstPass = true;</span>
		else
<span class="fc" id="L667">			firstPass = false;</span>
<span class="fc" id="L668">	}</span>

/**
 *Returns the number of values required for the next free argument.
 *
 *
 *@return the number of values from the first not used argument
 */
    
	public int getNextArgumentNumberValues()
	{
<span class="fc bfc" id="L679" title="All 2 branches covered.">		for (int k = 0 ;k &lt; argumentList.size(); k++)</span>
		{
<span class="fc bfc" id="L681" title="All 2 branches covered.">			if (argumentList.get(k) instanceof Argument)</span>
			{
<span class="fc bfc" id="L683" title="All 4 branches covered.">				if (argumentList.get(k).getValue() == null || argumentList.get(k).getNumberValues() &gt; argumentList.get(k).getMultiplesCount())</span>
				{
<span class="fc" id="L685">					return argumentList.get(k).getNumberValues();</span>
				}
			}
		}
<span class="fc" id="L689">		return 0;</span>
	}
	
/**
 *Returns the formatted help text for the program including
 *all of the arguments and their information.
 *
 *
 *@return the formatted help text of the program and arguments
 */
    public String getHelpText()
    {
<span class="fc" id="L701">        String argumentTitles = &quot;&quot;;</span>
<span class="fc" id="L702">        String optionalArgumentTitles = &quot;&quot;;</span>
<span class="fc" id="L703">        String description = &quot;&quot;;</span>
<span class="fc" id="L704">        String description2 = &quot;&quot;;</span>
<span class="fc bfc" id="L705" title="All 2 branches covered.">        for (CommandLineArgument a : argumentList)</span>
        {	
<span class="fc bfc" id="L707" title="All 2 branches covered.">            if ( a instanceof Argument)</span>
            {
<span class="fc" id="L709">                argumentTitles += a.getTitle() + &quot; &quot;;</span>
<span class="fc" id="L710">                description += a.getTitle() +&quot; &quot;+ a.getDataType().toString().toLowerCase();</span>
<span class="fc bfc" id="L711" title="All 2 branches covered.">				if(!a.getRestricted().equals(&quot;&quot;))</span>
<span class="fc" id="L712">					description+=&quot; &amp; restricted to: &quot; + a.getRestricted();</span>
<span class="fc" id="L713">				description+=&quot;\t\t&quot;+a.getDescription() + &quot;\r\n&quot;;</span>
            }
            else {
<span class="fc" id="L716">                optionalArgumentTitles += a.getTitle() + &quot; &quot;;</span>
<span class="fc" id="L717">                description2 +=&quot;--&quot;+ a.getTitle();</span>
<span class="fc bfc" id="L718" title="All 2 branches covered.">				if(!a.getShort().equals(&quot;&quot;))</span>
<span class="fc" id="L719">					description2+=&quot;, -&quot; + a.getShort();</span>
<span class="fc" id="L720">				description2+=&quot; &quot;+ a.getDataType().toString().toLowerCase();</span>
<span class="fc bfc" id="L721" title="All 2 branches covered.">				if(a.getRequired() == true)</span>
<span class="fc" id="L722">					description2+=&quot; required&quot;;</span>
<span class="fc bfc" id="L723" title="All 2 branches covered.">				if(!a.getRestricted().equals(&quot;&quot;))</span>
<span class="fc" id="L724">					description2+=&quot; &amp; restricted to: &quot; + a.getRestricted();</span>
<span class="fc bfc" id="L725" title="All 2 branches covered.">				if(groupOne.contains(a.getTitle()))</span>
<span class="fc" id="L726">					description2+=&quot; mutual exclusive group: 1&quot;;</span>
<span class="fc bfc" id="L727" title="All 2 branches covered.">				else if(groupTwo.contains(a.getTitle()))</span>
<span class="fc" id="L728">					description2+=&quot; mutual exclusive group: 2&quot;;</span>
<span class="fc" id="L729">				description2+= &quot;\t\t&quot;+a.getDescription() + &quot;\r\n&quot;;</span>
            }
<span class="fc" id="L731">        }</span>
<span class="fc" id="L732">        help = &quot;usage: java &quot; + program + &quot; &quot; + argumentTitles + &quot;\r\n&quot; + programDescription +&quot;\r\nPositional Arguments:\r\n&quot; + description + &quot;\r\nOptional Arguments:\r\n&quot; + description2;</span>
<span class="fc" id="L733">        return help;</span>
    }
    
/**
 *Returns the XML notation of the argument list for use 
 *in creating XML save data.
 *
 *
 *@return the XML notation of the argument list
 */
    public String getOutput()
    {
<span class="fc" id="L745">        output = &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;&quot;+ &quot;UTF-8&quot; + &quot;\&quot;?&gt;&quot;+&quot;\r\n&lt;arguments&gt;&quot;;</span>
<span class="fc bfc" id="L746" title="All 2 branches covered.">        for (int i = 0; i&lt;getSize(); i++)</span>
        {
<span class="fc" id="L748">            output += argumentList.get(i).toString();</span>
        }
<span class="fc" id="L750">        output += &quot;\r\n&lt;/arguments&gt;&quot;;</span>
<span class="fc" id="L751">        return output;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>